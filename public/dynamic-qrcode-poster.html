<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ´»ç æµ·æŠ¥ - åšä¸–ç•Œ</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .poster-container {
            max-width: 375px;
            margin: 0 auto;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .badge {
            background: #ff6b6b;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 15px;
        }
        .poster-header {
            text-align: center;
            color: white;
            margin-bottom: 20px;
        }
        .poster-header h1 {
            font-size: 28px;
            margin: 0 0 10px 0;
        }
        .poster-header p {
            font-size: 14px;
            opacity: 0.9;
        }
        .qr-section {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
        }
        #qrcodeCanvas {
            margin: 10px 0;
        }
        .invite-code-display {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
            letter-spacing: 3px;
            margin: 15px 0;
        }
        .invite-tip {
            color: #666;
            font-size: 13px;
            line-height: 1.6;
        }
        .short-url {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 8px;
            font-size: 12px;
            color: #333;
            word-break: break-all;
            margin: 10px 0;
            font-family: monospace;
        }
        .features {
            color: white;
            margin-bottom: 20px;
        }
        .feature-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            font-size: 14px;
        }
        .feature-item span:first-child {
            font-size: 20px;
            margin-right: 10px;
        }
        .commission-info {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 15px;
            color: white;
            text-align: center;
            margin-bottom: 20px;
        }
        .commission-info h3 {
            margin: 0 0 10px 0;
            font-size: 16px;
        }
        .commission-rates {
            display: flex;
            justify-content: space-around;
        }
        .rate-item {
            text-align: center;
        }
        .rate-percent {
            font-size: 24px;
            font-weight: bold;
        }
        .rate-label {
            font-size: 12px;
            opacity: 0.9;
        }
        .buttons {
            display: grid;
            gap: 10px;
        }
        .btn {
            background: white;
            color: #667eea;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }
        .btn:active {
            transform: scale(0.98);
        }
        .advantage-tip {
            background: #fff;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }
        .advantage-tip h4 {
            color: #ff6b6b;
            margin: 0 0 10px 0;
        }
        .advantage-tip ul {
            margin: 10px 0;
            padding-left: 20px;
            color: #333;
            font-size: 14px;
        }
        .advantage-tip li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="poster-container">
        <div class="badge">ğŸ”¥ æ´»ç æµ·æŠ¥ - æ°¸ä¸å¤±æ•ˆ</div>

        <div class="poster-header">
            <h1>ğŸ¨ åšä¸–ç•Œ</h1>
            <p>AIæ¢¦å¢ƒæˆçœŸï¼Œä¸€é”®ç”Ÿæˆä¸“å±å½¢è±¡</p>
        </div>

        <div class="qr-section">
            <canvas id="qrcodeCanvas"></canvas>
            <div class="invite-code-display" id="inviteCode">-</div>
            <div class="short-url" id="shortUrl">-</div>
            <div class="invite-tip">
                âœ… æ‰«ç ç«‹å³ä½“éªŒ<br>
                âœ… åŸŸåè¢«å°è‡ªåŠ¨åˆ‡æ¢<br>
                âœ… äºŒç»´ç å›¾ç‰‡æ°¸ä¹…æœ‰æ•ˆ
            </div>
        </div>

        <div class="features">
            <div class="feature-item">
                <span>âœ¨</span>
                <span>AIæ™ºèƒ½æ¢è„¸ï¼Œ3ç§’é¢„è§ˆæ•ˆæœ</span>
            </div>
            <div class="feature-item">
                <span>ğŸ¯</span>
                <span>æµ·é‡æ¨¡æ¿ï¼Œæ€»æœ‰ä½ å–œæ¬¢çš„é£æ ¼</span>
            </div>
            <div class="feature-item">
                <span>ğŸ”’</span>
                <span>éšç§ä¿æŠ¤ï¼Œç…§ç‰‡24å°æ—¶è‡ªåŠ¨é”€æ¯</span>
            </div>
        </div>

        <div class="commission-info">
            <h3>ğŸ’° æ¨èå¥–åŠ±è§„åˆ™</h3>
            <div class="commission-rates">
                <div class="rate-item">
                    <div class="rate-percent">30%</div>
                    <div class="rate-label">ç›´æ¥æ¨è</div>
                </div>
                <div class="rate-item">
                    <div class="rate-percent">10%</div>
                    <div class="rate-label">äºŒçº§æ¨è</div>
                </div>
                <div class="rate-item">
                    <div class="rate-percent">5%</div>
                    <div class="rate-label">ä¸‰çº§æ¨è</div>
                </div>
            </div>
        </div>

        <div class="buttons">
            <button class="btn" onclick="saveAsImage()">ğŸ’¾ ä¿å­˜æµ·æŠ¥</button>
            <button class="btn" onclick="copyShortUrl()">ğŸ“‹ å¤åˆ¶çŸ­é“¾æ¥</button>
        </div>

        <div class="advantage-tip">
            <h4>ğŸ”¥ æ´»ç ä¼˜åŠ¿ï¼ˆå¯¹æŠ—å¾®ä¿¡å°ç¦ï¼‰</h4>
            <ul>
                <li><strong>åå°å¯åˆ‡æ¢åŸŸå</strong>ï¼šåŸŸåè¢«å°åï¼Œåå°ä¸€é”®åˆ‡æ¢ï¼Œæ— éœ€é‡æ–°ç”Ÿæˆæµ·æŠ¥</li>
                <li><strong>çŸ­é“¾æ¥</strong>ï¼šç®€çŸ­æ˜“è®°ï¼Œæ¯”é•¿é“¾æ¥æ›´ç¾è§‚</li>
                <li><strong>æ•°æ®ç»Ÿè®¡</strong>ï¼šå¯æŸ¥çœ‹æ‰«ç æ¬¡æ•°ã€è½¬åŒ–ç‡ç­‰æ•°æ®</li>
                <li><strong>æ°¸ä¹…æœ‰æ•ˆ</strong>ï¼šå›¾ç‰‡ä¿å­˜åï¼Œåå°éšæ—¶è°ƒæ•´è·³è½¬åœ°å€</li>
            </ul>
            <p style="color: #666; font-size: 12px; margin-top: 10px;">
                ğŸ’¡ æç¤ºï¼šè¿™æ˜¯ä¸šå†…ä¸“ä¸šé˜²å°æ–¹æ¡ˆï¼Œæ·˜å®å®¢ã€çŸ­å‰§åˆ†é”€éƒ½åœ¨ç”¨
            </p>
        </div>
    </div>

    <!-- QRCode.js -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>

    <!-- html2canvas -->
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

    <script>
        // ä»URLè·å–å‚æ•°
        const urlParams = new URLSearchParams(window.location.search);
        const invitationCode = urlParams.get('code');
        const shortUrl = urlParams.get('shortUrl');
        const qrcodeId = urlParams.get('qrcodeId');

        if (!invitationCode || !shortUrl) {
            alert('ç¼ºå°‘å¿…è¦å‚æ•°');
            window.close();
        }

        // æ˜¾ç¤ºä¿¡æ¯
        document.getElementById('inviteCode').textContent = invitationCode;
        document.getElementById('shortUrl').textContent = shortUrl;

        // ç”ŸæˆäºŒç»´ç ï¼ˆä½¿ç”¨æ´»ç çŸ­é“¾æ¥ï¼‰
        const canvas = document.getElementById('qrcodeCanvas');

        QRCode.toCanvas(canvas, shortUrl, {
            width: 200,
            height: 200,
            margin: 2,
            color: {
                dark: '#000000',
                light: '#FFFFFF'
            }
        }, function (error) {
            if (error) console.error(error);
            console.log('æ´»ç äºŒç»´ç ç”ŸæˆæˆåŠŸï¼çŸ­é“¾æ¥:', shortUrl);
        });

        // ä¿å­˜ä¸ºå›¾ç‰‡
        function saveAsImage() {
            const poster = document.querySelector('.poster-container');

            html2canvas(poster, {
                backgroundColor: null,
                scale: 2,
                logging: false
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `åšä¸–ç•Œæ´»ç æµ·æŠ¥-${invitationCode}.png`;
                link.href = canvas.toDataURL();
                link.click();
            });
        }

        // å¤åˆ¶çŸ­é“¾æ¥
        function copyShortUrl() {
            navigator.clipboard.writeText(shortUrl).then(() => {
                alert('âœ… çŸ­é“¾æ¥å·²å¤åˆ¶ï¼\n\n' + shortUrl + '\n\nè¿™æ˜¯æ´»ç é“¾æ¥ï¼ŒåŸŸåè¢«å°åå¯åœ¨åå°åˆ‡æ¢');
            }).catch(() => {
                // é™çº§æ–¹æ¡ˆ
                const textarea = document.createElement('textarea');
                textarea.value = shortUrl;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('âœ… çŸ­é“¾æ¥å·²å¤åˆ¶ï¼');
            });
        }
    </script>
</body>
</html>
