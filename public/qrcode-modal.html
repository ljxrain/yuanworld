<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ†äº«æµ·æŠ¥ - åšä¸–ç•Œ</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .poster-container {
            max-width: 375px;
            margin: 0 auto;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .poster-header {
            text-align: center;
            color: white;
            margin-bottom: 20px;
        }
        .poster-header h1 {
            font-size: 28px;
            margin: 0 0 10px 0;
        }
        .poster-header p {
            font-size: 14px;
            opacity: 0.9;
        }
        .qr-section {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
        }
        #qrcodeCanvas {
            margin: 10px 0;
        }
        .invite-code-display {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
            letter-spacing: 3px;
            margin: 15px 0;
        }
        .invite-tip {
            color: #666;
            font-size: 13px;
            line-height: 1.6;
        }
        .features {
            color: white;
            margin-bottom: 20px;
        }
        .feature-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            font-size: 14px;
        }
        .feature-item span:first-child {
            font-size: 20px;
            margin-right: 10px;
        }
        .commission-info {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 15px;
            color: white;
            text-align: center;
            margin-bottom: 20px;
        }
        .commission-info h3 {
            margin: 0 0 10px 0;
            font-size: 16px;
        }
        .commission-rates {
            display: flex;
            justify-content: space-around;
        }
        .rate-item {
            text-align: center;
        }
        .rate-percent {
            font-size: 24px;
            font-weight: bold;
        }
        .rate-label {
            font-size: 12px;
            opacity: 0.9;
        }
        .buttons {
            display: grid;
            gap: 10px;
        }
        .btn {
            background: white;
            color: #667eea;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }
        .btn:active {
            transform: scale(0.98);
        }
        .wechat-tip {
            background: #fff;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }
        .wechat-tip.show {
            display: block;
        }
        .wechat-tip h4 {
            color: #ff4444;
            margin: 0 0 10px 0;
        }
        .wechat-tip ol {
            margin: 10px 0;
            padding-left: 20px;
            color: #333;
            font-size: 14px;
        }
        .wechat-tip li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="poster-container">
        <div class="poster-header">
            <h1>ğŸ¨ åšä¸–ç•Œ</h1>
            <p>AIæ¢¦å¢ƒæˆçœŸï¼Œä¸€é”®ç”Ÿæˆä¸“å±å½¢è±¡</p>
        </div>

        <div class="qr-section">
            <canvas id="qrcodeCanvas"></canvas>
            <div class="invite-code-display" id="inviteCode">-</div>
            <div class="invite-tip">
                æ‰«æäºŒç»´ç æ³¨å†Œ<br>
                æˆ‘ä»¬éƒ½èƒ½è·å¾—æ¨èå¥–åŠ±
            </div>
        </div>

        <div class="features">
            <div class="feature-item">
                <span>âœ¨</span>
                <span>AIæ™ºèƒ½æ¢è„¸ï¼Œ3ç§’é¢„è§ˆæ•ˆæœ</span>
            </div>
            <div class="feature-item">
                <span>ğŸ¯</span>
                <span>æµ·é‡æ¨¡æ¿ï¼Œæ€»æœ‰ä½ å–œæ¬¢çš„é£æ ¼</span>
            </div>
            <div class="feature-item">
                <span>ğŸ”’</span>
                <span>éšç§ä¿æŠ¤ï¼Œç…§ç‰‡24å°æ—¶è‡ªåŠ¨é”€æ¯</span>
            </div>
        </div>

        <div class="commission-info">
            <h3>ğŸ’° æ¨èå¥–åŠ±è§„åˆ™</h3>
            <div class="commission-rates">
                <div class="rate-item">
                    <div class="rate-percent">30%</div>
                    <div class="rate-label">ç›´æ¥æ¨è</div>
                </div>
                <div class="rate-item">
                    <div class="rate-percent">10%</div>
                    <div class="rate-label">äºŒçº§æ¨è</div>
                </div>
                <div class="rate-item">
                    <div class="rate-percent">5%</div>
                    <div class="rate-label">ä¸‰çº§æ¨è</div>
                </div>
            </div>
        </div>

        <div class="buttons">
            <button class="btn" onclick="saveAsImage()">ğŸ’¾ ä¿å­˜æµ·æŠ¥</button>
            <button class="btn" onclick="copyLink()">ğŸ“‹ å¤åˆ¶é“¾æ¥</button>
            <button class="btn" onclick="showWechatTip()">ğŸ“± å¾®ä¿¡åˆ†äº«æŒ‡å—</button>
        </div>

        <div class="wechat-tip" id="wechatTip">
            <h4>âš ï¸ å¾®ä¿¡åˆ†äº«æ³¨æ„äº‹é¡¹</h4>
            <ol>
                <li><strong>ä¿å­˜æµ·æŠ¥</strong>åå‘é€åˆ°æœ‹å‹åœˆæˆ–å¥½å‹</li>
                <li>å¥½å‹æ‰«ç åä¼šæç¤º<strong>"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€"</strong></li>
                <li>ç‚¹å‡»å³ä¸Šè§’ã€Â·Â·Â·ã€‘é€‰æ‹©<strong>"åœ¨æµè§ˆå™¨æ‰“å¼€"</strong></li>
                <li>æˆ–è€…ç›´æ¥<strong>å¤åˆ¶é“¾æ¥</strong>å‘ç»™å¥½å‹</li>
            </ol>
            <p style="color: #666; font-size: 12px; margin-top: 10px;">
                ğŸ’¡ æç¤ºï¼šä½¿ç”¨é»˜è®¤æµè§ˆå™¨æ‰“å¼€æ•ˆæœæœ€ä½³
            </p>
        </div>
    </div>

    <!-- QRCode.js -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>

    <!-- html2canvas -->
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

    <script>
        // ä»URLè·å–é‚€è¯·ç 
        const urlParams = new URLSearchParams(window.location.search);
        const invitationCode = urlParams.get('code');
        const invitationUrl = urlParams.get('url');

        if (!invitationCode) {
            alert('ç¼ºå°‘é‚€è¯·ç å‚æ•°');
            window.close();
        }

        // æ˜¾ç¤ºé‚€è¯·ç 
        document.getElementById('inviteCode').textContent = invitationCode;

        // ç”ŸæˆäºŒç»´ç 
        const canvas = document.getElementById('qrcodeCanvas');

        // ä½¿ç”¨çŸ­é“¾æˆ–å¼•å¯¼é¡µï¼ˆé˜²æ­¢å¾®ä¿¡æ‹¦æˆªï¼‰
        // æ–¹æ¡ˆ1ï¼šç›´æ¥é“¾æ¥ï¼ˆå¯èƒ½è¢«æ‹¦æˆªï¼‰
        // const qrUrl = invitationUrl;

        // æ–¹æ¡ˆ2ï¼šå¼•å¯¼é¡µï¼ˆæ¨èï¼‰
        const qrUrl = `http://49.232.220.223/yuan/redirect.html?code=${invitationCode}`;

        QRCode.toCanvas(canvas, qrUrl, {
            width: 200,
            height: 200,
            margin: 2,
            color: {
                dark: '#000000',
                light: '#FFFFFF'
            }
        }, function (error) {
            if (error) console.error(error);
        });

        // ä¿å­˜ä¸ºå›¾ç‰‡
        function saveAsImage() {
            const poster = document.querySelector('.poster-container');

            html2canvas(poster, {
                backgroundColor: null,
                scale: 2,
                logging: false
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `åšä¸–ç•Œé‚€è¯·æµ·æŠ¥-${invitationCode}.png`;
                link.href = canvas.toDataURL();
                link.click();
            });
        }

        // å¤åˆ¶é“¾æ¥
        function copyLink() {
            const url = invitationUrl || `http://49.232.220.223/yuan/register.html?code=${invitationCode}`;

            navigator.clipboard.writeText(url).then(() => {
                alert('âœ… é‚€è¯·é“¾æ¥å·²å¤åˆ¶ï¼\n\næ‚¨å¯ä»¥ç›´æ¥å‘é€ç»™å¥½å‹');
            }).catch(() => {
                // é™çº§æ–¹æ¡ˆ
                const textarea = document.createElement('textarea');
                textarea.value = url;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('âœ… é‚€è¯·é“¾æ¥å·²å¤åˆ¶ï¼');
            });
        }

        // æ˜¾ç¤ºå¾®ä¿¡åˆ†äº«æç¤º
        function showWechatTip() {
            const tip = document.getElementById('wechatTip');
            tip.classList.toggle('show');
        }
    </script>
</body>
</html>
