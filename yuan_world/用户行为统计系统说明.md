# 用户行为统计系统使用说明

## 📊 系统概述

用户行为统计系统是一个完整的用户行为追踪和分析平台，可以帮助您全面了解用户在网站上的所有行为，包括注册、登录、页面浏览、模板使用等。

## 🌐 访问地址

**统计系统入口**: http://49.232.220.223/yuan/behavior-stats.html

⚠️ **权限要求**: 仅管理员可以访问此页面

## 🎯 核心功能

### 1. 概览统计
实时显示关键指标：
- 📊 总用户数
- 📊 活跃用户数（有浏览记录的用户）
- 📊 页面浏览量
- 📊 登录次数
- 📊 预览生成数

### 2. 用户行为列表
查看所有用户及其行为统计：
- 用户名、邮箱、注册时间
- 最后登录时间
- 页面浏览次数
- 预览生成次数
- 登录次数
- 用户状态

**点击任意用户**可查看详细行为记录！

### 3. 用户详细行为
单个用户的完整行为时间线：
- **登录记录** (最近100次)
  - 登录时间
  - IP地址
  - 设备信息
  - 在线时长
  
- **页面浏览记录** (最近200次)
  - 访问的页面
  - 访问时间
  - 停留时长
  
- **预览生成记录** (最近100次)
  - 使用的模板
  - 生成时间
  - 生成状态
  - 处理耗时

### 4. 热门页面排行
分析网站页面受欢迎程度：
- 页面路径和标题
- 总浏览量
- 独立访客数
- 平均停留时间

### 5. 热门模板排行
了解用户最喜欢的模板：
- 模板名称和分类
- 使用次数
- 使用用户数

## 🔍 筛选功能

### 时间范围筛选
- 选择开始日期和结束日期
- 查看特定时间段的数据
- 所有统计数据都会相应更新

### 用户搜索
- 按用户名搜索
- 按邮箱搜索
- 支持模糊匹配

## 📈 使用场景

### 产品分析
1. **用户活跃度分析**
   - 哪些用户最活跃？
   - 用户登录频率如何？
   - 用户停留时间多长？

2. **功能使用分析**
   - 哪些页面最受欢迎？
   - 哪些模板使用最多？
   - 用户流失在哪个环节？

3. **时段分析**
   - 用户主要在什么时间访问？
   - 高峰期和低谷期分布？

### 运营优化
1. **内容优化**
   - 热门页面：重点维护和优化
   - 冷门页面：分析原因，改进或删除
   
2. **模板优化**
   - 热门模板：增加类似模板
   - 冷门模板：分析原因，优化或下架

3. **用户体验**
   - 分析用户访问路径
   - 找出用户流失点
   - 优化关键页面

### 客服支持
1. **用户问题排查**
   - 查看用户的操作历史
   - 定位问题发生时间
   - 了解用户使用习惯

2. **用户画像**
   - 用户活跃时间
   - 常用功能
   - 使用偏好

## 💾 数据库表结构

### login_logs（登录日志表）
```sql
- id: 主键
- user_id: 用户ID
- username: 用户名
- ip_address: IP地址
- user_agent: 设备信息
- login_time: 登录时间
- logout_time: 登出时间
- session_duration: 会话时长（秒）
- login_success: 是否成功
```

### page_views（页面访问表）
```sql
- id: 主键
- user_id: 用户ID
- username: 用户名
- page_path: 页面路径
- page_title: 页面标题
- referrer: 来源页面
- user_agent: 设备信息
- ip_address: IP地址
- session_id: 会话ID
- duration: 停留时长（秒）
- created_at: 访问时间
```

## 🔧 技术实现

### 自动追踪
- 页面访问自动记录（通过 behavior-tracker.js）
- 登录自动记录（后端自动）
- 无需手动操作

### API接口
- `GET /api/user-behavior/overview` - 获取概览数据
- `GET /api/user-behavior/users` - 获取用户列表
- `GET /api/user-behavior/users/:userId/behavior` - 获取用户详细行为
- `GET /api/user-behavior/popular-pages` - 获取热门页面
- `GET /api/user-behavior/popular-templates` - 获取热门模板
- `POST /api/user-behavior/page-view` - 记录页面访问

## 📱 界面特点

- 🎨 美观的渐变色设计
- 📊 直观的数据展示
- 🔍 强大的筛选功能
- 📱 响应式设计，支持移动端
- ⚡ 快速加载，流畅体验
- 🎯 点击用户查看详情

## 📝 使用建议

### 日常监控
- 每天查看活跃用户数变化
- 关注热门页面和模板的变化
- 及时发现异常访问

### 周期分析
- 每周分析用户行为趋势
- 每月评估功能使用情况
- 季度对比数据变化

### 问题排查
- 用户反馈问题时，查看其操作历史
- 功能异常时，分析相关页面访问情况
- 性能问题时，查看页面停留时间

## 🔒 安全性

- ✅ 仅管理员可以访问
- ✅ 需要登录验证
- ✅ API请求需要Token
- ✅ 敏感数据脱敏处理

## 🚀 后续扩展

可以进一步扩展的功能：
- 📈 数据可视化图表（ECharts）
- 📊 用户漏斗分析
- 🎯 用户分群功能
- 📧 异常行为预警
- 📤 数据导出功能（Excel/CSV）
- 🔔 定期报告邮件

## 💡 使用技巧

1. **快速查找用户**: 使用搜索框，支持用户名和邮箱
2. **时间范围分析**: 设置日期范围，查看特定时期数据
3. **点击查看详情**: 点击用户行可查看完整行为时间线
4. **标签页切换**: 在用户列表、热门页面、热门模板之间快速切换
5. **分页浏览**: 支持分页，每页显示50条记录

---

**部署时间**: 2025年10月16日  
**版本**: v1.0  
**开发者**: AI Assistant

